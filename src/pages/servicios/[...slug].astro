---
import BaseLayout from '@layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const services = await getCollection('services');
  return services.map((service) => ({
    params: { slug: service.id },
    props: { service },
  }));
}

const { service } = Astro.props;
const { Content } = await render(service);
---

<BaseLayout
  title={service.data.title}
  description={service.data.description}
  image={service.data.image}
  imageAlt={service.data.imageAlt}
  keywords={[service.data.title, 'servicios', 'firefighter']}
>
  <article class="section">
    <div class="container">
      <header class="service-header">
        {service.data.icon && <span class="service-icon">{service.data.icon}</span>}
        <h1>{service.data.title}</h1>
        <p class="service-description">{service.data.description}</p>
      </header>

      {service.data.image && (
        <img
          src={service.data.image}
          alt={service.data.imageAlt || service.data.title}
          class="service-image"
        />
      )}

      <div class="prose">
        <Content />
      </div>

      <footer class="service-footer">
        <a href="/servicios" class="btn btn-outline">‚Üê Ver todos los servicios</a>
        <a href="/contacto" class="btn btn-primary">Solicitar este servicio</a>
      </footer>
    </div>
  </article>
</BaseLayout>

<style>
  .service-header {
    text-align: center;
    margin-bottom: var(--space-8);
  }

  .service-icon {
    font-size: 4rem;
    display: block;
    margin-bottom: var(--space-4);
  }

  .service-header h1 {
    margin-bottom: var(--space-4);
  }

  .service-description {
    font-size: var(--text-xl);
    color: var(--color-text-secondary);
    max-width: 600px;
    margin-inline: auto;
  }

  .service-image {
    width: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-8);
  }

  .prose {
    max-width: 75ch;
  }

  .service-footer {
    margin-top: var(--space-12);
    padding-top: var(--space-8);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--space-4);
    flex-wrap: wrap;
  }
</style>
